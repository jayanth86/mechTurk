<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="mturk.js"></script>
		<script type="text/javascript">
			var numclicks = 0;
			var keydowns = 0;
			var addedelements = [];
			$(document).ready(function(){
				
			    $("#mturk_form").submit(function(){
			        alert("Submitted");

			    });
			    $("#p6").click(function(e)	{
					numclicks++;
					console.log(e);
					$("#numberofpeople").text(numclicks);
					$("image6").val(numclicks);
					var newdomelement = $("<div class='marker'></div>");
					newdomelement.css("left", e.pageX + "px");
					newdomelement.css("top", e.pageY + "px");

					$("body").append(newdomelement);
					addedelements.push(newdomelement);
				})
			    $(document).keydown(function(e)	{
			    	console.log(e);
			    	if(e.key=="z" && e.ctrlKey && numclicks!= 0)	{
			    		var elem2remove = addedelements.pop();
			    		removeElement(elem2remove);
			    	}
			    })
			});
			
			function removeElement(elem)	{
				$(elem).remove();

				numclicks--;
				$("#image6").val(numclicks);
				$("#numberofpeople").text(numclicks);
			}
			function removeElementEvent(e)	{
				removeElement(this);
			}

		</script>
		<style>
			.marker	{
				border: 2px solid red;
				border-radius: 5px;
				width: 2px;
				height: 2px;
				position: absolute;
				left: 0px;
				top: 0px;
			}
		</style>
		
	</head>
	<body>
		
		
		<form id="mturk_form">
	  		WorkerId:<br>
	  		<input type="text" name="workerId"><br> 
	  		When counting people, only count them if the majority of the head is showing.<br> 
	  		Animals do not count and please check the edges carefully!!<br>
	  		<img src="people1.jpg" style="width:624px;height:330.67px;"> <br />
	  		Number of people in image 1:<br>
	  		<input type="text" name="image1"><br>
	  		<img src="people2.jpg" style="width:624px;height:330.67px;"> <br />
	  		Number of people in image 2:<br>
	  		<input type="text" name="image2"><br>
	  		<img src="people3.jpg" style="width:624px;height:330.67px;"> <br />
	  		Number of people in image 3:<br>
	  		<input type="text" name="image3"><br>
	  		<img src="people4.jpg" style="width:624px;height:330.67px;"> <br />
	  		Number of people in image 4:<br>
	  		<input type="text" name="image4"><br>
	  		<img src="people5.jpg" style="width:624px;height:330.67px;"> <br />
	  		Number of people in image 5:<br>
	  		<input type="text" name="image5"><br>
	  		<img id="p6" src="people6.jpg" style="width:1000px;height:500px;"> <br />
	  		For this picture, you need to click on each face to mark it. <br>
	  		To undo a marker, hit ctrl + z <br>
	  		Number of people in image 6 (Sorry for making you do this):<br>
	  		You've selected  <Span id="numberofpeople">0</Span> people.<br>
	  		<input id="image6" type="hidden" name="image6">
	  		Please triple check that you submitted every field - otherwise you won't receive credit <br>
	  		<input type="submit" value="Submit">
		</form>
		
	</body>
</html>
